<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mejor Plazo Fijo Argentina 2026 | Comparador de Tasas TNA</title>
    <meta name="description"
        content="Compar√° tasas de Plazo Fijo en Argentina. Simul√° ganancias en pesos, d√≥lares y UVA para encontrar el banco que m√°s paga hoy.">
    <meta name="keywords"
        content="plazo fijo, tasas TNA, comparador bancos argentina, plazo fijo UVA, plazo fijo d√≥lares, inversiones argentina">
    <meta property="og:title" content="¬øQu√© banco paga m√°s hoy? Comparador de Plazos Fijos üìä">
    <meta property="og:description"
        content="Calcul√° cu√°nto gan√°s invirtiendo en Plazo Fijo Tradicional, UVA o D√≥lares. Datos actualizados.">
    <meta property="og:image" content="./img/galicia.png">
    <meta property="og:type" content="website">

    <style>
        :root {
            --bg: #f4f6f8;
            --card: #fff;
            --text: #333;
            --muted: #6b7280;
            --border: #e5e7eb;
            --primary: #2563eb;
            --success: #16a34a;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
            color: var(--text);
        }

        .container {
            max-width: 980px;
            margin: 0 auto;
        }

        .skip-link {
            position: absolute;
            left: -9999px;
            top: 0;
            background: #111827;
            color: #fff;
            padding: 8px 12px;
            border-radius: 0 0 8px 8px;
            z-index: 1000;
        }

        .skip-link:focus {
            left: 12px;
        }

        .top-nav {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .top-nav a {
            text-decoration: none;
            color: #1e3a8a;
            font-weight: 700;
            font-size: .86rem;
            background: #eef2ff;
            border: 1px solid #c7d2fe;
            border-radius: 999px;
            padding: 6px 10px;
        }

        header {
            text-align: center;
            margin-bottom: 24px;
        }

        h1 {
            margin-bottom: 6px;
            font-size: 2rem;
        }

        .subtitle {
            color: var(--muted);
        }

        .simulador-box {
            background: var(--card);
            padding: 22px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 16px;
            display: flex;
            gap: 14px;
            flex-wrap: wrap;
            align-items: flex-end;
        }

        .input-group {
            flex: 1;
            min-width: 190px;
        }

        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 7px;
            font-size: 0.9rem;
        }

        select,
        input {
            width: 100%;
            padding: 12px;
            font-size: 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            outline: none;
            font-weight: 600;
            background: #fff;
        }

        select:focus,
        input:focus {
            border-color: var(--primary);
        }

        .resumen {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 16px;
        }

        .resumen-card {
            background: #fff;
            border-radius: 10px;
            border: 1px solid var(--border);
            padding: 12px;
        }

        .resumen-card .label {
            color: var(--muted);
            font-size: .8rem;
            margin-bottom: 4px;
        }

        .resumen-card .value {
            font-weight: 700;
            font-size: 1rem;
        }

        .tabla-bancos {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .banco-card {
            background: white;
            padding: 16px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 5px solid transparent;
            gap: 12px;
        }

        .info-banco {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 2;
            min-width: 220px;
        }

        .logo-banco {
            width: 48px;
            height: 48px;
            object-fit: contain;
        }

        .nombre-banco {
            font-weight: 700;
            font-size: 1.03rem;
        }

        .tna-badge {
            background: #eef2ff;
            color: #4338ca;
            padding: 3px 7px;
            border-radius: 4px;
            font-size: .78rem;
            font-weight: 700;
        }

        .info-ganancia {
            text-align: right;
            flex: 1;
            min-width: 170px;
        }

        .ganancia-monto {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--success);
        }

        .btn-invertir {
            background-color: var(--primary);
            color: #fff;
            text-decoration: none;
            padding: 9px 16px;
            border-radius: 6px;
            font-weight: 700;
            display: inline-block;
            white-space: nowrap;
        }

        .mejor-opcion {
            border-left-color: #22c55e;
            background-color: #fafffc;
        }

        .aviso-rango {
            font-size: .74rem;
            color: var(--muted);
            display: block;
            margin-top: 4px;
        }

        .etiqueta-tier {
            background: #fff3cd;
            color: #856404;
            font-size: .68rem;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: 700;
            margin-left: 4px;
        }

        .status {
            text-align: center;
            color: var(--muted);
            margin: 18px 0;
        }

        .acciones {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 14px;
            flex-wrap: wrap;
        }

        .btn-secundario {
            border: 1px solid var(--border);
            background: #fff;
            color: #111827;
            border-radius: 8px;
            padding: 8px 12px;
            font-weight: 600;
            cursor: pointer;
        }

        .market-pulse {
            margin-top: 10px;
            margin-bottom: 16px;
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 10px;
        }

        .pulse-card {
            background: #fff;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 12px;
        }

        .pulse-card h3 {
            margin: 0 0 6px;
            font-size: 1rem;
        }

        .pulse-card p {
            margin: 0;
            color: var(--muted);
            font-size: .9rem;
            line-height: 1.35;
        }

        footer {
            margin-top: 16px;
            text-align: center;
            color: var(--muted);
            font-size: .82rem;
        }

        @media (max-width: 740px) {
            .resumen,
            .market-pulse {
                grid-template-columns: 1fr;
            }

            .banco-card,
            .info-banco {
                flex-direction: column;
                text-align: center;
            }

            .info-ganancia {
                text-align: center;
            }

            .btn-invertir {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <a class="skip-link" href="#simulador">Saltar al simulador</a>

    <div class="container">
        <header>
            <h1>Comparador Experto üìä</h1>
            <nav class="top-nav" aria-label="navegaci√≥n principal">
                <a href="./tendencias-finanzas.html">Tendencias de Finanzas</a>
                <a href="./radar-financiero.html">Radar Financiero</a>
                <a href="./tendencias-ideas.html">Ideas de cartera</a>
            </nav>
            <p class="subtitle">Compar√° tasas por <b>d√≠as</b> y <b>monto</b> para encontrar la mejor opci√≥n.</p>
        </header>

        <div class="simulador-box" id="simulador">
            <div class="input-group">
                <label for="tipo-pf">Tipo de Plazo Fijo</label>
                <select id="tipo-pf" onchange="actualizarInterfaz()">
                    <option value="tradicional">üá¶üá∑ Tradicional Pesos</option>
                    <option value="dolares">üíµ Tradicional D√≥lares</option>
                    <option value="precancelable">‚è±Ô∏è Precancelable (Fijo)</option>
                    <option value="uva">üìà UVA Fijo</option>
                    <option value="uva_precancelable">üìà UVA Precancelable</option>
                </select>
            </div>
            <div class="input-group">
                <label for="monto">Monto a Invertir</label>
                <input type="number" id="monto" min="1" value="100000" oninput="calcularTodo()">
            </div>
            <div class="input-group">
                <label for="dias">D√≠as de Plazo</label>
                <input type="number" id="dias" min="1" value="30" oninput="calcularTodo()">
            </div>
            <div class="input-group">
                <label for="orden">Ordenar por</label>
                <select id="orden" onchange="calcularTodo()">
                    <option value="ganancia">Mayor ganancia</option>
                    <option value="tna">Mayor TNA</option>
                </select>
            </div>
        </div>

        <div class="resumen" id="resumen" aria-live="polite"></div>

        <div class="acciones">
            <button class="btn-secundario" onclick="compartirSimulacion()">üîó Compartir simulaci√≥n</button>
            <button class="btn-secundario" onclick="restablecerValores()">‚Ü∫ Restablecer</button>
        </div>

        <section class="market-pulse" aria-label="pulso financiero global">
            <article class="pulse-card">
                <h3>üìå Tasa US 10Y cerca de 4,06%</h3>
                <p>Mayor sensibilidad del mercado a inflaci√≥n y empleo; duraci√≥n corta vuelve a ser t√°ctica para perfiles conservadores.</p>
            </article>
            <article class="pulse-card">
                <h3>ü§ñ IA con volatilidad en acciones</h3>
                <p>Las tecnol√≥gicas siguen l√≠deres, pero sube la dispersi√≥n por valuaci√≥n y balance. Conviene mirar caja y deuda.</p>
            </article>
            <article class="pulse-card">
                <h3>‚Çø Flujos institucionales a ETF de BTC</h3>
                <p>Fondos soberanos de Abu Dhabi elevaron exposici√≥n a IBIT; refuerza la tesis de adopci√≥n institucional de cripto.</p>
            </article>
            <article class="pulse-card">
                <h3>ü™ô Tokenizaci√≥n de activos reales</h3>
                <p>Crecen casos de uso (dividendos en oro tokenizado y stablecoins reguladas), acercando finanzas tradicionales y blockchain.</p>
            </article>
        </section>

        <div id="status" class="status">Cargando tasas...</div>
        <div id="lista-bancos" class="tabla-bancos"></div>

        <footer>
            C√°lculo estimado: <code>Inter√©s = Monto √ó (TNA/100) √ó (D√≠as/365)</code>. Verific√° condiciones finales en cada banco.
        </footer>
    </div>

    <script>
        const URL_JSON = "./tasas_bancos.json";
        let datosBancos = [];
        let monedaActual = 'ARS';

        window.onload = async function () {
            const status = document.getElementById('status');
            try {
                const response = await fetch(URL_JSON, { cache: 'no-cache' });
                if (!response.ok) throw new Error('No se pudo cargar el JSON de tasas');
                datosBancos = await response.json();
                status.style.display = 'none';
                aplicarParametrosDesdeURL();
                calcularTodo();
            } catch (error) {
                console.error(error);
                status.textContent = 'No se pudieron cargar las tasas. Intent√° recargar la p√°gina.';
            }
        };

        function actualizarInterfaz() {
            const tipo = document.getElementById('tipo-pf').value;
            monedaActual = tipo === 'dolares' ? 'USD' : 'ARS';

            // Defaults r√°pidos por tipo
            if (tipo === 'dolares') {
                document.getElementById('monto').value = 1000;
                document.getElementById('dias').value = 30;
            } else if (tipo === 'uva' || tipo === 'uva_precancelable') {
                document.getElementById('monto').value = 100000;
                document.getElementById('dias').value = 180;
            } else {
                document.getElementById('monto').value = 100000;
                document.getElementById('dias').value = 30;
            }

            calcularTodo();
        }

        function aplicarParametrosDesdeURL() {
            const p = new URLSearchParams(window.location.search);
            const tipo = p.get('tipo');
            const monto = p.get('monto');
            const dias = p.get('dias');
            const orden = p.get('orden');

            const tipoEl = document.getElementById('tipo-pf');
            const montoEl = document.getElementById('monto');
            const diasEl = document.getElementById('dias');
            const ordenEl = document.getElementById('orden');

            if (tipo && [...tipoEl.options].some(o => o.value === tipo)) {
                tipoEl.value = tipo;
            }

            actualizarInterfaz();

            if (monto && !Number.isNaN(Number(monto))) montoEl.value = Math.max(1, Number(monto));
            if (dias && !Number.isNaN(Number(dias))) diasEl.value = Math.max(1, Number(dias));
            if (orden && [...ordenEl.options].some(o => o.value === orden)) ordenEl.value = orden;
        }

        function actualizarURL(tipo, monto, dias, orden) {
            const p = new URLSearchParams();
            p.set('tipo', tipo);
            p.set('monto', String(monto));
            p.set('dias', String(dias));
            p.set('orden', orden);
            history.replaceState({}, '', `${window.location.pathname}?${p.toString()}`);
        }

        async function compartirSimulacion() {
            const url = window.location.href;
            try {
                await navigator.clipboard.writeText(url);
                alert('Link copiado al portapapeles ‚úÖ');
            } catch (_) {
                prompt('Copi√° este link:', url);
            }
        }

        function restablecerValores() {
            document.getElementById('tipo-pf').value = 'tradicional';
            document.getElementById('orden').value = 'ganancia';
            actualizarInterfaz();
        }

        function obtenerTasaInteligente(tasasConfig, diasUsuario, montoUsuario) {
            if (!tasasConfig) return { tna: null, esPremium: false };

            if (typeof tasasConfig === 'number') {
                return { tna: tasasConfig, esPremium: false };
            }

            if (Array.isArray(tasasConfig)) {
                const reglasPorDias = tasasConfig.filter(r => diasUsuario >= r.min_dias && diasUsuario <= r.max_dias);
                if (reglasPorDias.length === 0) return { tna: null, esPremium: false };

                const reglasValidas = reglasPorDias.filter(r => montoUsuario >= (r.min_monto || 0));
                if (reglasValidas.length === 0) return { tna: null, esPremium: false };

                reglasValidas.sort((a, b) => (b.min_monto || 0) - (a.min_monto || 0));
                const mejorRegla = reglasValidas[0];
                return { tna: mejorRegla.tna, esPremium: (mejorRegla.min_monto || 0) > 0 };
            }

            return { tna: null, esPremium: false };
        }

        function escapeHtml(str = '') {
            return String(str)
                .replaceAll('&', '&amp;')
                .replaceAll('<', '&lt;')
                .replaceAll('>', '&gt;')
                .replaceAll('"', '&quot;')
                .replaceAll("'", '&#039;');
        }

        function renderResumen(bancos, dias) {
            const resumen = document.getElementById('resumen');
            if (!bancos.length) {
                resumen.innerHTML = '';
                return;
            }

            const mejor = bancos[0];
            const mejorTna = [...bancos].sort((a, b) => b.tnaFinal - a.tnaFinal)[0];
            const promedioTna = (bancos.reduce((acc, b) => acc + b.tnaFinal, 0) / bancos.length).toFixed(2);

            const fmtGanancia = mejor.ganancia.toLocaleString('es-AR', {
                style: 'currency',
                currency: monedaActual,
                maximumFractionDigits: 0
            });

            resumen.innerHTML = `
                <div class="resumen-card">
                    <div class="label">Mejor opci√≥n para ${dias} d√≠as</div>
                    <div class="value">${escapeHtml(mejor.banco)}</div>
                </div>
                <div class="resumen-card">
                    <div class="label">Ganancia estimada m√°xima</div>
                    <div class="value">+${fmtGanancia}</div>
                </div>
                <div class="resumen-card">
                    <div class="label">Mayor TNA disponible</div>
                    <div class="value">${mejorTna.tnaFinal}% (promedio ${promedioTna}%)</div>
                </div>
            `;
        }

        function calcularTodo() {
            const monto = Math.max(1, parseFloat(document.getElementById('monto').value) || 0);
            const dias = Math.max(1, parseFloat(document.getElementById('dias').value) || 30);
            const tipoSeleccionado = document.getElementById('tipo-pf').value;
            const orden = document.getElementById('orden').value;
            const contenedor = document.getElementById('lista-bancos');
            const status = document.getElementById('status');

            document.getElementById('monto').value = monto;
            document.getElementById('dias').value = dias;

            contenedor.innerHTML = "";
            if (datosBancos.length === 0) return;

            const bancosCalculados = datosBancos
                .map(banco => {
                    const config = banco.tasas ? banco.tasas[tipoSeleccionado] : null;
                    const resultado = obtenerTasaInteligente(config, dias, monto);
                    if (resultado.tna === null) return null;

                    const ganancia = monto * (resultado.tna / 100) * (dias / 365);
                    return {
                        ...banco,
                        tnaFinal: resultado.tna,
                        esPremium: resultado.esPremium,
                        ganancia,
                        total: monto + ganancia
                    };
                })
                .filter(Boolean);

            if (!bancosCalculados.length) {
                status.style.display = 'block';
                status.textContent = 'No hay bancos con tasas disponibles para estos par√°metros.';
                renderResumen([], dias);
                return;
            }

            status.style.display = 'none';

            bancosCalculados.sort((a, b) => {
                if (orden === 'tna') return b.tnaFinal - a.tnaFinal;
                return b.ganancia - a.ganancia;
            });

            renderResumen(bancosCalculados, dias);
            actualizarURL(tipoSeleccionado, monto, dias, orden);

            bancosCalculados.forEach((banco, index) => {
                const esMejor = index === 0;
                const gananciaFmt = banco.ganancia.toLocaleString('es-AR', {
                    style: 'currency',
                    currency: monedaActual,
                    maximumFractionDigits: 0
                });

                const etiquetaPremium = banco.esPremium ? `<span class="etiqueta-tier">üëë TASA PREFERENCIAL</span>` : "";
                const avisoUva = (tipoSeleccionado === 'uva' || tipoSeleccionado === 'uva_precancelable')
                    ? `<span class="aviso-rango">Inflaci√≥n + ${banco.tnaFinal}%</span>`
                    : "";

                const html = `
                    <div class="banco-card ${esMejor ? 'mejor-opcion' : ''}">
                        <div class="info-banco">
                            <img src="${escapeHtml(banco.logo)}" class="logo-banco" alt="Logo ${escapeHtml(banco.banco)}" loading="lazy">
                            <div>
                                <div class="nombre-banco">${escapeHtml(banco.banco)} ${etiquetaPremium}</div>
                                <span class="tna-badge">${banco.tnaFinal}% TNA</span>
                                ${avisoUva}
                            </div>
                        </div>
                        <div class="info-ganancia">
                            <div style="font-size:.8em; color:#888;">INTER√âS ${dias} D√çAS</div>
                            <div class="ganancia-monto">+${gananciaFmt}</div>
                        </div>
                        <div class="boton-accion">
                            <a href="${escapeHtml(banco.link)}" target="_blank" rel="noopener noreferrer" class="btn-invertir">Invertir</a>
                        </div>
                    </div>
                `;
                contenedor.innerHTML += html;
            });
        }
    </script>
</body>

</html>
